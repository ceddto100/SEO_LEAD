================================================================================
WORKFLOW 09: EMAIL MARKETING SEQUENCES
================================================================================

WORKFLOW NAME: AI Email Nurture & Newsletter Automation Engine

TRIGGER (Make.com Module):
- Webhooks > Custom Webhook: Receives segment assignment from Workflow 07
- Schedule: Weekly (Thursdays 6 AM) for newsletter generation
- Google Sheets > Watch Rows: New subscriber added to email list

--------------------------------------------------------------------------------
AI AGENT ROLE:
--------------------------------------------------------------------------------
The AI agent acts as an Email Marketing Strategist. It:
- Creates multi-email nurture sequences tailored by segment
- Generates weekly newsletters from recent blog content
- Personalizes email content based on subscriber behavior
- Optimizes subject lines and send times
- Manages list segmentation and subscriber health

--------------------------------------------------------------------------------
STEP-BY-STEP AUTOMATION LOGIC:
--------------------------------------------------------------------------------

STEP 1: SEGMENT SUBSCRIBER
  Module: Webhooks > Custom Webhook
  Payload:
  {
    "email": "subscriber@company.com",
    "name": "Jane",
    "segment": "seo-interested-smb",
    "tier": "warm",
    "lead_magnet": "free-seo-checklist",
    "sequence_type": "nurture"
  }

  Segment Types:
    - seo-interested: Downloaded SEO-related content
    - lead-gen-interested: Downloaded lead gen content
    - general-subscriber: Signed up for newsletter only
    - customer: Already purchased / active client
    - re-engage: Went cold, needs win-back

STEP 2: SELECT EMAIL SEQUENCE
  Module: Router (based on segment + sequence_type)

  NURTURE SEQUENCE (6 emails over 21 days):
    Email 1 (Day 0): Welcome + deliver lead magnet + set expectations
    Email 2 (Day 3): Educational content related to their interest
    Email 3 (Day 7): Case study / social proof
    Email 4 (Day 10): Common mistakes + how to avoid them
    Email 5 (Day 14): Free tool / template / resource
    Email 6 (Day 21): Soft pitch + CTA to book a call or try product

  NEWSLETTER SEQUENCE (weekly, ongoing):
    Every Thursday: Curated content from recent blog posts

  RE-ENGAGEMENT SEQUENCE (3 emails over 14 days):
    Email 1 (Day 0): "We miss you" + best content roundup
    Email 2 (Day 7): Exclusive offer or resource
    Email 3 (Day 14): Last chance + unsubscribe option

STEP 3: AI EMAIL CONTENT GENERATION (Nurture)
  Module: OpenAI > Create Chat Completion (Iterator - per email in sequence)
  Model: gpt-4o
  Prompt Template:
  """
  Write email {{email_number}} of {{total_emails}} in a nurture sequence.

  SUBSCRIBER: {{name}}
  SEGMENT: {{segment}}
  EMAIL TYPE: {{email_type}} (welcome/educational/case-study/mistakes/resource/pitch)
  PREVIOUS EMAILS SENT: {{previous_subjects}}

  CONTEXT:
  - They downloaded: {{lead_magnet}}
  - Their interest area: {{interest_area}}
  - Our business: {{business_description}}

  EMAIL RULES:
  1. Subject line: 6-10 words, curiosity or benefit driven, no spam words
  2. Preview text: 40-90 chars, complements subject
  3. Body: 200-400 words max
  4. Personal tone, write as a helpful friend not a marketer
  5. One main idea per email
  6. One clear CTA (reply, click, download, book)
  7. P.S. line with bonus tip or secondary CTA
  8. Use {{first_name}} personalization

  Return JSON:
  {
    "subject": "...",
    "preview_text": "...",
    "body_html": "<p>Hi {{first_name}},</p>...",
    "cta_text": "Read the guide",
    "cta_url": "https://...",
    "send_day": {{day_number}},
    "ps_line": "P.S. ..."
  }
  """

STEP 4: AI NEWSLETTER GENERATION (Weekly)
  Module: Schedule > Every Thursday at 6 AM
  Module: Google Sheets > Search Rows
  Sheet: "PublishedArticles"
  Filter: Date >= (today - 7 days)
  Output: This week's published articles

  Module: OpenAI > Create Chat Completion
  Prompt Template:
  """
  Create a weekly newsletter from these recently published articles:

  ARTICLES:
  {{articles_array_with_titles_urls_excerpts}}

  NEWSLETTER FORMAT:
  - Subject: Engaging, topical, max 50 chars
  - Preview text: 60-90 chars
  - Intro: 2-3 sentence personal note about this week's theme (50 words max)
  - Article Summaries: For each article:
    - Catchy one-line hook
    - 2-sentence summary
    - "Read more" link
  - Tip of the Week: One actionable tip related to the theme
  - CTA: Invite reply with questions or feedback
  - Footer: Social links + unsubscribe

  Return JSON:
  {
    "subject": "...",
    "preview_text": "...",
    "intro": "...",
    "articles": [
      { "hook": "...", "summary": "...", "url": "..." }
    ],
    "tip_of_week": "...",
    "cta": "..."
  }
  """

STEP 5: BUILD EMAIL HTML
  Module: Tools > Set Variable
  Action: Insert AI content into email HTML template
  Template: Pre-designed responsive HTML email template stored in Make.com
  Variables: subject, preview_text, body, CTA button, images, footer

STEP 6: SEND VIA EMAIL SERVICE PROVIDER
  Module: Mailchimp > Create Campaign / Send Email
  OR Module: ConvertKit > Create Broadcast
  OR Module: HTTP > Make a Request (SendGrid/Mailgun)

  Mailchimp Example:
  Module: Mailchimp > Create a Campaign
  {
    "type": "regular",
    "recipients": { "list_id": "{{list_id}}", "segment_opts": { "match": "all", "conditions": [{"field": "SEGMENT", "op": "is", "value": "{{segment}}"}] }},
    "settings": {
      "subject_line": "{{subject}}",
      "preview_text": "{{preview_text}}",
      "from_name": "Your Brand",
      "reply_to": "reply@yourdomain.com"
    }
  }
  Then: Mailchimp > Send Campaign

  For Nurture (drip):
  Module: Mailchimp > Add Member to Automation
  OR schedule individual sends with delays using Make.com's delay module

STEP 7: TRACK EMAIL PERFORMANCE
  Module: Mailchimp > Watch Campaign Reports (or webhook from ESP)
  Metrics captured: open_rate, click_rate, bounce_rate, unsubscribe_rate
  Module: Google Sheets > Add Row
  Sheet: "EmailPerformance"
  Columns: Campaign | Subject | Segment | Sent | Opens | Clicks | Unsubs | Date

STEP 8: AI SUBJECT LINE OPTIMIZATION
  Module: OpenAI > Create Chat Completion (runs weekly on performance data)
  Prompt:
  """
  Review these email subject line performance results:

  {{last_10_emails_with_subject_and_open_rate}}

  Identify:
  1. Which subject line patterns get highest open rates
  2. Which patterns underperform
  3. Recommend 5 new subject line styles to test

  Return JSON:
  {
    "top_patterns": ["curiosity gap", "number + benefit"],
    "weak_patterns": ["question-only", "too long"],
    "recommendations": ["Try: ...", "Test: ..."]
  }
  """

STEP 9: LIST HEALTH MANAGEMENT
  Module: Schedule > Monthly
  Module: Mailchimp > Search Members
  Filter: last_open_date < 90 days ago
  Action:
    - Tag as "inactive"
    - Trigger re-engagement sequence (Step 2, re-engage path)
    - After re-engage sequence: if still inactive for 30 more days -> unsubscribe

STEP 10: UPDATE SUBSCRIBER RECORDS
  Module: Google Sheets > Update Row
  Sheet: "EmailSubscribers"
  Update: sequence_stage, last_email_sent, total_opens, total_clicks, status

--------------------------------------------------------------------------------
INPUTS & OUTPUTS:
--------------------------------------------------------------------------------

INPUTS:
  - Subscriber data (email, name, segment) from Workflow 07
  - Published articles list (from Workflow 05) for newsletters
  - Email performance metrics from ESP
  - HTML email template

OUTPUTS:
  - Nurture email sequences (6 emails per segment, AI-written)
  - Weekly newsletters (auto-generated from blog content)
  - Email performance tracking
  - Subject line optimization insights
  - List health management actions

DATA STRUCTURE (EmailPerformance):
  | Campaign      | Subject            | Segment   | Sent | Opens | Open% | Clicks | Click% | Unsubs | Date       |
  |---------------|--------------------|-----------|------|-------|-------|--------|--------|--------|------------|
  | Nurture #3    | 3 SEO mistakes...  | seo-smb   | 450  | 198   | 44%   | 67     | 15%    | 2      | 2026-02-12 |

--------------------------------------------------------------------------------
TOOLS / APIs INVOLVED:
--------------------------------------------------------------------------------
  - Make.com (orchestration, scheduling, delays)
  - OpenAI API (email writing, newsletters, optimization)
  - Mailchimp / ConvertKit / SendGrid (email delivery)
  - Google Sheets (subscriber tracking, performance data)
  - Webhooks (ESP event processing)

--------------------------------------------------------------------------------
OPTIMIZATION OPPORTUNITIES:
--------------------------------------------------------------------------------
  1. A/B test subject lines on 10% of list before full send
  2. Dynamic content blocks based on subscriber segment
  3. Send-time optimization per subscriber (ML-based)
  4. Add SMS follow-up for high-engagement subscribers (via Twilio)
  5. Triggered emails on specific website behavior (visited pricing page)
  6. Build referral program emails (share with friend for bonus content)
  7. Seasonal campaign templates (Black Friday, New Year, etc.)
