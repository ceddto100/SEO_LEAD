================================================================================
WORKFLOW 07: LEAD CAPTURE & FUNNEL AUTOMATION
================================================================================

WORKFLOW NAME: AI Lead Capture & Funnel Builder Engine

TRIGGER (Make.com Module):
- Webhooks > Custom Webhook: Fires when a form submission occurs on the website
- Watch Email: Monitors for lead form notification emails
- Schedule: Daily check for new leads from multiple sources

--------------------------------------------------------------------------------
AI AGENT ROLE:
--------------------------------------------------------------------------------
The AI agent acts as a Lead Qualification Specialist. It:
- Captures leads from multiple sources (forms, popups, landing pages, chatbots)
- Enriches lead data with available information
- Scores leads based on behavior and fit
- Routes leads to appropriate follow-up sequences
- Triggers CRM entry and email workflows

--------------------------------------------------------------------------------
STEP-BY-STEP AUTOMATION LOGIC:
--------------------------------------------------------------------------------

STEP 1: CAPTURE LEAD FROM FORM SUBMISSION
  Module: Webhooks > Custom Webhook
  URL: https://hook.make.com/your-lead-capture-webhook
  Expected Payload:
  {
    "name": "John Doe",
    "email": "john@company.com",
    "phone": "+1234567890",
    "company": "Acme Corp",
    "source": "blog-cta",
    "page_url": "https://site.com/blog/lead-gen-guide",
    "lead_magnet": "free-seo-checklist",
    "utm_source": "google",
    "utm_medium": "organic",
    "utm_campaign": "seo-blog"
  }

  ALTERNATIVE SOURCES:
  - Typeform > Watch Responses
  - Google Forms > Watch Responses
  - Facebook Lead Ads > Watch Leads
  - Calendly > Watch Events (meeting bookings)
  - Intercom / Drift > Watch Conversations (chatbot leads)

STEP 2: VALIDATE & CLEAN LEAD DATA
  Module: Tools > Set Variable + Filters
  Actions:
    - Check email format is valid (regex filter)
    - Check for disposable email domains (filter out mailinator, guerrillamail, etc.)
    - Normalize phone number format
    - Trim whitespace from all fields
  Filter: If email is invalid or disposable -> Route to "rejected" sheet, stop

STEP 3: CHECK FOR DUPLICATE LEADS
  Module: Google Sheets > Search Rows
  Sheet: "MasterLeadList"
  Search: email = {{lead_email}}
  Route A: Duplicate found -> Update existing row with new source, skip to Step 8
  Route B: New lead -> proceed to Step 4

STEP 4: ENRICH LEAD DATA
  Module: HTTP > Make a Request
  Action: Call enrichment API (Clearbit, Apollo, Hunter.io)
  Endpoint: GET https://company.clearbit.com/v2/companies/find?domain={{email_domain}}
  Headers: { "Authorization": "Bearer YOUR_CLEARBIT_KEY" }
  Output: company_size, industry, revenue, location, social profiles

  ALTERNATIVE (budget option):
  Module: OpenAI > Create Chat Completion
  Prompt:
  """
  Given this lead information:
  Name: {{name}}
  Email: {{email}}
  Company: {{company}}

  Infer what you can about:
  1. Likely company size (startup/SMB/enterprise)
  2. Industry
  3. Job role/seniority
  4. Potential pain points for our SEO/marketing services

  Return JSON:
  {
    "company_size": "SMB",
    "industry": "SaaS",
    "likely_role": "Marketing Manager",
    "pain_points": ["low organic traffic", "no content strategy"],
    "enrichment_confidence": "medium"
  }
  """

STEP 5: AI LEAD SCORING
  Module: OpenAI > Create Chat Completion
  Prompt Template:
  """
  Score this lead from 1-100 based on likelihood to convert.

  Lead Data:
  - Name: {{name}}
  - Email: {{email}} (domain: {{domain}})
  - Company: {{company}}
  - Company Size: {{company_size}}
  - Industry: {{industry}}
  - Source: {{source}} ({{utm_source}}/{{utm_medium}})
  - Lead Magnet Downloaded: {{lead_magnet}}
  - Page URL: {{page_url}}

  Scoring Criteria:
  - Business email domain (+20 vs free email like gmail)
  - Company size SMB/Enterprise (+15 vs individual)
  - Source is high-intent page like pricing/demo (+25 vs blog)
  - Downloaded high-value lead magnet (+10)
  - Industry match to our ICP (+15)
  - Has phone number (+5)

  Return JSON:
  {
    "score": 72,
    "tier": "warm",
    "reasoning": "Business email, SMB SaaS company, came from blog CTA...",
    "recommended_action": "Add to nurture email sequence, book follow-up in 3 days",
    "segment": "seo-interested-smb"
  }
  """

  Scoring Tiers:
    80-100 = HOT (immediate sales follow-up)
    50-79  = WARM (nurture email sequence + scheduled follow-up)
    20-49  = COOL (long-term nurture, monthly newsletter)
    0-19   = LOW (add to list, no active outreach)

STEP 6: DELIVER LEAD MAGNET
  Module: Router (based on lead_magnet field)
  Route A: "free-seo-checklist" -> Email > Send with PDF attachment
  Route B: "content-strategy-template" -> Email > Send with Google Docs link
  Route C: "free-consultation" -> Calendly > Create Scheduling Link

  Module: Email > Send
  To: {{lead_email}}
  Subject: "Here's your {{lead_magnet_name}} - {{name}}"
  Body: Personalized delivery email with download link + soft CTA
  Attachment: {{lead_magnet_file}}

STEP 7: ROUTE BY LEAD SCORE
  Module: Router (Make.com)
  Route A: Score 80-100 (HOT):
    -> Trigger Workflow 08 (CRM + AI Follow-Up) with "priority" flag
    -> Send Slack notification to sales team
    -> Add to "Hot Leads" Google Sheet
  Route B: Score 50-79 (WARM):
    -> Trigger Workflow 09 (Email Sequence) with "nurture" tag
    -> Add to CRM with 3-day follow-up reminder
  Route C: Score 20-49 (COOL):
    -> Add to weekly newsletter list
    -> Trigger long-term drip campaign
  Route D: Score 0-19 (LOW):
    -> Add to master list only, no active outreach

STEP 8: SAVE TO MASTER LEAD LIST
  Module: Google Sheets > Add Row
  Sheet: "MasterLeadList"
  Columns:
  | Name | Email | Phone | Company | Source | Score | Tier | Segment | Lead Magnet | Date | Status |

STEP 9: ADD TO CRM
  Module: HubSpot > Create Contact (or Pipedrive, Salesforce)
  Fields:
    - First Name, Last Name, Email, Phone, Company
    - Lead Score (custom property)
    - Lead Source
    - Lifecycle Stage: based on tier
    - Owner: auto-assign based on tier

STEP 10: TRACK CONVERSION SOURCE
  Module: Google Sheets > Add Row
  Sheet: "ConversionTracking"
  Data: source, medium, campaign, page_url, lead_magnet, score, date
  (Feeds into Workflow 10 Analytics)

--------------------------------------------------------------------------------
INPUTS & OUTPUTS:
--------------------------------------------------------------------------------

INPUTS:
  - Form submission data (name, email, company, source, UTM params)
  - Lead magnet files (PDFs, templates, links)
  - Scoring criteria configuration
  - CRM API credentials

OUTPUTS:
  - Enriched lead profile
  - Lead score and tier classification
  - Lead magnet delivered via email
  - CRM contact created
  - Lead routed to appropriate follow-up workflow
  - Master lead list entry
  - Conversion tracking entry

DATA STRUCTURE (MasterLeadList):
  | Name      | Email            | Company    | Score | Tier | Segment       | Source      | Date       | Status    |
  |-----------|------------------|------------|-------|------|---------------|-------------|------------|-----------|
  | John Doe  | john@acme.com    | Acme Corp  | 78    | warm | seo-smb       | blog-cta    | 2026-02-12 | nurturing |

--------------------------------------------------------------------------------
TOOLS / APIs INVOLVED:
--------------------------------------------------------------------------------
  - Make.com (orchestration, routing, filtering)
  - Webhooks (lead capture)
  - Google Sheets (master list, tracking)
  - OpenAI API (lead scoring, enrichment)
  - Clearbit / Apollo API (data enrichment - optional)
  - HubSpot / Pipedrive CRM API (contact management)
  - Gmail (lead magnet delivery)
  - Slack (hot lead notifications)
  - Calendly (consultation booking)

--------------------------------------------------------------------------------
OPTIMIZATION OPPORTUNITIES:
--------------------------------------------------------------------------------
  1. Add exit-intent popup captures (OptinMonster / ConvertBox integration)
  2. Build AI chatbot on website for conversational lead capture
  3. Implement progressive profiling (ask for more info on return visits)
  4. A/B test different lead magnets per blog topic
  5. Track lead-magnet-to-customer conversion rates by type
  6. Add retargeting pixel events for lead capture pages
  7. Build referral tracking (leads that refer other leads get bonus score)
